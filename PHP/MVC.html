<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico" />

    <title>PHP - MVC</title>

    <link
      rel="canonical"
      href="https://getbootstrap.com/docs/4.0/examples/blog/"
    />

    <!-- Bootstrap core CSS -->
    <link
      href="https://dipvkpx7wt4f2.cloudfront.net/assets/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Custom styles for this template -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Ballet&display=swap"
      rel="stylesheet"
    />
    <link href="https://dipvkpx7wt4f2.cloudfront.net/assets/css/01aaa1aah.css" rel="stylesheet"/><!-- IDE -->
  </head>

  <body data-new-gr-c-s-check-loaded="14.997.0" data-gr-ext-installed="">
    <div class="container">
      <header class="blog-header py-3">
        <div class="row flex-nowrap justify-content-between align-items-center">
          <div class="col-4 pt-1"></div>
          <div class="col-4 text-center">
            <a
              class="blog-header-logo text-dark"
              href="#"
              style="font-family: 'Ballet', cursive; text-decoration: none"
            >
              <h1 style="font-weight: 600">Maximilian Lever</h1>
            </a>
          </div>
          <div
            class="col-4 d-flex justify-content-end align-items-center"
          ></div>
        </div>
      </header>

      <div class="nav-scroller py-1 mb-2">
        <nav class="nav d-flex justify-content-between">
          <a class="p-2 text-muted" href="../AWS/ActiveDirectory.html">AWS</a>
          <a class="p-2 text-muted" href="../BeaverBuilder/setup.html"
            >Beaver Builder</a
          >
          <a class="p-2 text-muted" href="../CSS/bootstrap.html">CSS</a>
          <a class="p-2 text-muted" href="../G.I.M.P/transparent.html"
            >G.I.M.P</a
          >
          <a class="p-2 text-muted" href="../MYSQL/tutorial.html">MYSQL</a>
          <a class="p-2 text-muted" href="../PHP/MVC.html">PHP</a>
          <a class="p-2 text-muted" href="../Python/machineLearning.html"
            >Python</a
          >
        </nav>
      </div>
    </div>

    <main role="main" class="container">
      <div class="row">
        <div class="col-md-8 blog-main">
          <h3 class="pb-3 mb-4 font-italic border-bottom">PHP</h3>

          <div class="blog-post">
            <h2 class="blog-post-title">Model View Controller (MVC)</h2>
            <p class="blog-post-meta">
              September 14, 2020 by
              <a
                target="_blank"
                href="https://www.linkedin.com/in/maximilian-lever-09214097/"
                >Maximilian Lever</a
              >
            </p>
            <p>
              When writing in PHP the best way to set out your code is to make
              three folders:
            </p>
            <p><b>Model</b> is where your database connection code is kept.</p>
            <p>
              <b>View</b> is where the front-end code for what the user viewâ€™s
              is kept.
            </p>
            <p>
              <b>Controller</b> is where the back-end code that interacts with
              the database, works with the data it has received and then
              displays the output to the View.
            </p>
            <b>Model</b>
            <div class="codeblock">
              <code>
                <span class="tag">$servername</span> = <span class="text">"localhost"</span>;<br>
                <span class="tag">$username</span> = <span class="text">"root"</span>;<br>
                <span class="tag">$password</span> = <span class="text">""</span>;<br>
                <span class="tag">$dbname</span> = <span class="text">"databaseName"</span>;<br><br>

                  <span class="comment">/*Create connection*/</span><br>
                  <span class="tag">$conn</span> = <span class="tag">new</span> <span class="number">mysqli</span>(<span class="tag">$servername</span>, <span class="tag">$username</span>, <span class="tag">$password</span>, <span class="tag">$dbname</span>);<br>
                  <span class="comment">/*Check connection*/</span><br>
                  <span class="statement">if</span> (<span class="tag">$conn</span>-><span class="tag">connect_error</span>) {<br>
                    <span class="statement">die</span>(<span class="text">"Connection failed: "</span> . <span class="tag">$conn</span>-><span class="tag">connect_error</span>);<br>
                  }
              </code>
            </div>
            <p>
              In the code above we use five variables to store the information
              to connect to the database and the fifth variable is where we
              store the database connection. The IF Statement at the bottom
              checks if the connection to the database was successful.
            </p>

            <b>Controller</b
            >
            <div class="codeblock">
              <code>
                <span class="function">include</span>(<span class="text">'C:/xampp/htdocs/model/logDatabase.php'</span>);<br>
                <span class="tag">$time</span> = <span class="function">date</span>(<span class="text">'Y-m-d H:i:s'</span>);<br>
                <span class="tag">$query</span> = <span class="text">"INSERT INTO `loggingsystem`.`tbl_logs` (`log`, `log_time`) VALUES ('" . $_POST['log'] . "', '" . $time . "')"</span>;<br><br>

                <span class="tag">$conn</span>-><span class="function">query</span>(<span class="tag">$query</span>);<br>
                <span class="tag">$conn</span>-><span class="function">close</span>();<br>
                  <span class="function">header</span>(<span class="text">'Location: /view/viewLog.php'</span>);<br>
              </code>
            </div>
            <p>
              In the first line of the code for the controller I have stated
              where to find the database file in the model folder, which
              contains the connection to the database.
            </p>
            <p>
              We create two variables and name them $time and $query. $time will
              use the date()function to store the current date and time of the
              server.
            </p>
            <p>An example of what the query will look like is listed below.</p>
            <p>
              INSERT INTO `loggingsystem`.`tbl_logs` (`log`, `log_time`) VALUES
              ('John Doe logged out', '21/01/19 12:00:00');
            </p>
            <p>
              We then take the connection variable created in the model folder
              and submit the query to the database, It then closes the
              connection and redirects the webpage to the view file.
            </p>
            <b>View</b>
            <div class="codeblock">
              <code>
                <span class="function">include</span>(<span class="text">'C:/xampp/htdocs/model/logDatabase.php'</span>);<br>
                <span class="tag">$query</span> = <span class="text">"SELECT * FROM tbl_logs"</span>;<br><br>

                <span class="tag">$result</span> = <span class="tag">$conn</span>-><span class="function">query</span>(<span class="tag">$query</span>);<br>
                <span class="statement">if</span> (<span class="tag">$result</span>->num_rows > 0) {<br>
                  <span class="tag">$int</span> = <span class="number">0</span>;<br>
                  <span class="statement">while</span> (<span class="tag">$row</span> = <span class="tag">$result</span>-><span class="function">fetch_assoc</span>()) {<br>
                  <span class="tag">$log_id</span>[<span class="tag">$int</span>] = <span class="tag">$row</span>[<span class="text">'log_id'</span>];<br>
                  <span class="tag">$log</span>[<span class="tag">$int</span>] = <span class="tag">$row</span>[<span class="text">'log'</span>];<br>
                  <span class="tag">$log_time</span>[<span class="tag">$int</span>] = <span class="tag">$row</span>[<span class="text">'log_time'</span>];<br>
                <span class="tag">$int++</span>;<br>
                }<br>
                } <span class="statement">else</span> {<br>
                  <span class="function">echo</span> <span class="text">"0 results"</span>;<br>
                }<br>
                <span class="tag">$conn</span>->close();
              </code>
            </div>
            <p>
              Again I have included where the database connection is and then it
              will then use the variables in that file.
            </p>
            <p>
              The first variable is the query to get everything from tbl_logs.
              The code then makes a connection to the database to submit the
              query and return everything from tbl_logs, what the database
              returns is then put into a $result variable.
            </p>
            <p>
              The IF ELSE statement checks to see if there are any rows of data
              in tbl_logs. If there are no rows it then shows on the web page 0
              results.
            </p>
            <p>
              If there are rows in the table, it then triggers a WHILE LOOP to
              take all the information and put them into arrays and then closes
              the database connection.
            </p>
            <div class="codeblock">
              <code>
                <span class="tag">$arrayLength</span> = <span class="function">count</span>(<span class="tag">$log_id</span>);<br>
                  <span class="tag">$i</span> = <span class="number">0</span>;<br>
                <span class="statement">while</span> (<span class="tag">$i</span> < <span class="tag">$arrayLength</span>) {<br>
                  <span class="function">echo</span> <span class="text">'</span><br>
                  <span class="text">'</span> . <span class="tag">$log_id</span>[<span class="tag">$i</span>]</span> . <span class="text">'</span><br>
                  <span class="text">'</span> . <span class="tag">$log</span>[<span class="tag">$i</span>]</span> . <span class="text">'</span><br>
                  <span class="text">'</span> . <span class="tag">$log_time</span>[<span class="tag">$i</span>]</span> . <span class="text">'</span><br>
                <span class="text">'</span>;<br>
                <span class="tag">$i++</span>;<br>
                }
              </code>
            </div>

            <p>
              Next we will take the arrays with the information from the
              database and then list them out into a table using the echo
              function in PHP.
            </p>
            <p>
              The first line of PHP counts the length of the array and puts it
              in a variable called arrayLength. We do this so the WHILE LOOP we
              have included in this section knows how many times to loop.
            </p>

            <hr />
          </div>
          <!-- /.blog-post -->
        </div>
        <!-- /.blog-main -->

        <aside class="col-md-4 blog-sidebar">
          <div class="p-3">
            <h4 class="font-italic">Archives</h4>
            <ol class="list-unstyled mb-0" style="width: 223px">
              <li>
                <a class="p-2 text-muted" href="#"
                  >Model View Controller (MVC)</a
                >
              </li>
              <li><a class="p-2 text-muted" href="./MYSQL.html">MYSQL</a></li>
              <li>
                <a class="p-2 text-muted" href="./operators.html">Operators</a>
              </li>
            </ol>
          </div>

          <!-- <div class="p-3">
            <h4 class="font-italic">Elsewhere</h4>
            <ol class="list-unstyled">
              <li><a href="#">GitHub</a></li>
              <li><a href="#">Twitter</a></li>
              <li><a href="#">Facebook</a></li>
            </ol>
          </div> -->
        </aside>
        <!-- /.blog-sidebar -->
      </div>
      <!-- /.row -->
    </main>
    <!-- /.container -->

    <!-- Bootstrap core JavaScript
================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script>
      window.jQuery ||
        document.write(
          '<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>'
        );
    </script>
    <script src="../../assets/js/vendor/popper.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <script src="../../assets/js/vendor/holder.min.js"></script>
    <script>
      Holder.addTheme("thumb", {
        bg: "#55595c",
        fg: "#eceeef",
        text: "Thumbnail",
      });
    </script>

    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="200"
      height="250"
      viewBox="0 0 200 250"
      preserveAspectRatio="none"
      style="
        display: none;
        visibility: hidden;
        position: absolute;
        top: -100%;
        left: -100%;
      "
    >
      <defs><style type="text/css"></style></defs>
      <text
        x="0"
        y="13"
        style="
          font-weight: bold;
          font-size: 13pt;
          font-family: Arial, Helvetica, Open Sans, sans-serif;
        "
      >
        Thumbnail
      </text>
    </svg>
  </body>
</html>